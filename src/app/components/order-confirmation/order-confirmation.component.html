<app-header></app-header>

<h1>Récapitulatif de votre commande</h1>

<div class="box" [ngClass]="{ 'info-toggle': isClicked}">
    <form class="user-info-form">
      <legend><h3>Veuillez renseigner vos informations</h3></legend>
        <mat-form-field class="example-full-width">
            <mat-label>Votre nom</mat-label>
            <input matInput placeholder="Ex. Jean Daniel" required [(ngModel)]="userName" name="userName"> 
          </mat-form-field>

        <mat-form-field class="example-full-width">
          <mat-label>Votre Email</mat-label>
          <input matInput placeholder="Ex. example@gmail.com" required [(ngModel)]="userEmail" name="userEmail"> 
        </mat-form-field>
      
        <mat-form-field class="example-full-width">
          <mat-label>Votre adresse</mat-label>
          <textarea matInput placeholder="Ex. 12 Bd Jean Jaures 37000 Tours" required [(ngModel)]="userAddress" name="userAddress"></textarea>
        </mat-form-field>

        <mat-form-field class="example-full-width">
            <mat-label>Moyen de paiement</mat-label>
            <select matNativeControl required [(ngModel)]="paymentMethod" name="paymentMethod">
              <option value="cb">Carte Bancaire</option>
              <option value="paypal">Paypal</option>
              <option value="metamask">Metamask</option>
            </select>
          </mat-form-field>

          <button class="submit button" (click)="addCustomer()" >Valider mes informations</button>
      </form>

</div>

<div class="order-recap box">
    <table>
        <tr>
            <th>Produit</th>
            <th>Quantité</th>
            <th>Prix</th>
        </tr>
    @for (item of cart; track item.id) {

            <tr>
                <td>{{ getProduct(item.id)?.name}}</td>
                <td>{{ item.quantity }}</td>
                <td>{{ ((getProduct(item.id)?.price ?? 0) * (item?.quantity ?? 0)) | number: "1.0-2" }} €</td>
            </tr>
        }
        <tr>
            <td>Livraison</td>
            <td></td>
            <td>{{getDeliveryOption()  | number: "1.0-2" }} €</td>
        </tr>
        <tr>
            <td></td>
            <td>Total: </td>
            <td>{{(getTotalOrderPrice() + getDeliveryOption()) | number: "1.0-2" }} €</td>
        </tr>
        </table>
 <button class="button" (click)="createOrder()">Confirmer la commande et passer au paiement</button>
</div>



<button routerLink="/orderslist" class="submit button">Show me orders</button>